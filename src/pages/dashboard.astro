---
import Layout from '../layouts/Layout.astro';
import { verifySession } from '../lib/auth';

const cookie = Astro.cookies.get("admin_session")?.value;
const user = await verifySession(cookie);

if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Dashboard - Review System">
  <div class="p-8 min-h-screen bg-gray-900 text-white">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold">Dashboard</h1>
        <button id="logout-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition">
            Logout
        </button>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Dashboard content will go here -->
    </div>
  </div>

  <script>
    document.getElementById('logout-btn')?.addEventListener('click', async () => {
      await fetch('/api/auth/logout', { method: 'POST' });
      window.location.href = '/login';
    });
  </script>
</Layout>
